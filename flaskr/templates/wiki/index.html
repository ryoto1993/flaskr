{% extends "layout.html" %}
{% block body %}
  <h2>Wiki Pages</h2>
  {% if session.logged_in %}
    <div class="action-buttons">
      <a href="{{ url_for('create_wiki_page') }}" class="button">Create New Wiki Page</a>
    </div>
  {% endif %}
  
  {% if wiki_pages %}
    <ul class="wiki-pages">
      {% for page in wiki_pages %}
        <li>
          <a href="{{ url_for('view_wiki_page', page_id=page.id) }}">{{ page.title }}</a>
          <span class="wiki-meta">Last updated: {{ page.updated }}</span>
          {% if session.logged_in %}
            <div class="wiki-actions">
              <a href="{{ url_for('edit_wiki_page', page_id=page.id) }}" class="edit-link">Edit</a>
              <form action="{{ url_for('delete_wiki_page', page_id=page.id) }}" method="post" class="delete-form">
                <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this page?');">
              </form>
            </div>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No wiki pages have been created yet.</p>
    {% if session.logged_in %}
      <p>Click "Create New Wiki Page" to add the first page.</p>
    {% else %}
      <p>Please log in to create wiki pages.</p>
    {% endif %}
  {% endif %}
{% endblock %}